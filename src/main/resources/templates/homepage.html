<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Home Page</title>
    <link rel="stylesheet" th:href="@{/css/homepagestyle.css}" />
</head>
<body>
<h1>Welcome to the Home Page</h1>

<!-- Search bar at top, right-aligned -->
<div class="search-row">
    <form class="search-form" th:action="@{/search}" method="get">
        <input type="text" placeholder="Search..." name="search"/>
        <input type="submit" value="Search"/>
    </form>
</div>

<!-- Filters in a separate bar below -->
<form class="filters-form" th:action="@{/search}" method="get">
    <select name="author">
        <option value="">Select Author</option>
        <option th:each="author : ${authors}" th:value="${author}" th:text="${author}"></option>
    </select>
    <select name="publishedDate">
        <option value="">Select Published Date</option>
        <option th:each="date : ${dates}" th:value="${date}" th:text="${date}"></option>
    </select>
    <select name="tag">
        <option value="">Select Tag</option>
        <option th:each="tag : ${tags}" th:value="${tag}" th:text="${tag}"></option>
    </select>
    <select name="sortBy">
        <option value="desc">Newest First</option>
        <option value="asc">Oldest First</option>
    </select>
    <input type="submit" value="Apply" />
</form>

<!-- Post cards -->
<div th:if="${posts}" class="container">
    <div th:each="post : ${posts}" class="post-box">
        <div class="post-title" th:text="${post.title}"></div>
        <div class="post-meta-row">
            <span th:text="${post.author}"></span><span th:text="', ' + ${post.publishedDate}"></span>
        </div>
        <div class="post-excerpt" th:text="${post.excerpt}"></div>
        <div class="post-content" th:text="${post.content}"></div>
        <div class="tags">
            <span th:each="tag : ${post.tags}" class="tag" th:text="${tag.name}"></span>
        </div>
        <div class="read-more-row">
            <a th:href="@{'/view-post/' + ${post.postId}}" class="read-more-link">Read More</a>
        </div>
    </div>
</div>
</body>
</html>
